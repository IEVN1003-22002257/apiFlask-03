{% extends "layout.html" %}
{% import "_macros.html" as macro %}
 
{% block content %}
 
<style>
 
    .pizza-content-area {
        background-color: #99b4d1;
        padding: 20px;
        border-radius: 3px;
        border: 1px solid #7f8fa1;
        max-width: 1100px;
        margin: 0 auto;
    }
 
    .form-box {
        background-color: #99b4d1;
        border: 2px solid #b8cee8;
        padding: 15px;
        border-radius: 3px;
        margin-bottom: 15px;
        min-height: 150px;
    }
 
    .table-box {
        background-color: #ababab;
        border: 2px solid #323131;
        padding: 10px;
        border-radius: 3px;
        min-height: 230px;
    }
 
    .ventas-box {
        background-color: #ababab;
        border: 2px solid #323131;
        padding: 15px;
        border-radius: 3px;
        min-height: 230px;
        color: #333;
    }
 
    legend {
        font-size: 16px;
        font-weight: bold;
        margin-bottom: 10px;
        color: #333;
    }
 
    .ventas-button-container {
        text-align: center;
        margin-top: 20px;
    }
    
    .radio-inline-fix {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-bottom: 6px;
    }
</style>
 
<div class="container pizza-content-area">
 
  {% if mensaje %}
        <div class="alert alert-success" role="alert">
            <h2>{{ mensaje }}</h2>
        </div>
    {% endif %}
 
    <form class="form-horizontal" action="" method="post" novalidate>
        {{ form.hidden_tag() }}
 
        <div class="row-fluid" style="display: flex; gap: 20px; margin-bottom: 20px;">
            <div style="flex: 1;">
                {{ macro.campoNuevo(form.nombre, class="input-large", placeholder="Nombre") }}
            </div>
            <div style="flex: 1;">
                {{ macro.campoNuevo(form.direccion, class="input-large", placeholder="Dirección") }}
            </div>
            <div style="flex: 1;">
                {{ macro.campoNuevo(form.telefono, class="input-large", placeholder="Teléfono") }}
            </div>
        </div>
 
        <div class="row-fluid" style="display: flex; gap: 20px;">
 
    <div class="span6" style="flex: 1;">
        <div class="form-box">
            <label>Tamaño Pizza</label>
 
            {% for subfield in form.tamano %}
                <div class="radio-inline-fix">
                    {{ subfield() }}
                    <label for="{{ subfield.id }}">{{ subfield.label.text }}</label>
                </div>
            {% endfor %}
        </div>
    </div>
 
    <div class="span6" style="flex: 1;">
        <div class="form-box">
            <label>Ingredientes</label>
 
            {% for ing in [form.jamon, form.pina, form.champinones] %}
                <div class="radio-inline-fix">
                    {{ ing() }}
                    <label for="{{ ing.id }}">{{ ing.label.text }}</label>
                </div>
            {% endfor %}
        </div>
    </div>
    <div style="flex: 0.6;">
        <div class="form-box">
            <label>Num. de Pizzas</label>
 
            <div style="display: flex; flex-direction: column; gap: 10px;">
                <div>
                    {{ macro.campoNuevo(form.num_pizzas, class="input-small", placeholder="Num. Pizzas") }}
                </div>
                <div>
                    {{ form.agregar(class="btn btn-primary") }}
                </div>
            </div>
        </div>
    </div>
 
</div>
 
        
 
        <hr style="border-top: 2px solid #C5CDE0;">
 
        <div class="row-fluid" style="display: flex; gap: 20px;">
 
            <div class="span8" style="flex: 2;">
                <div class="table-box">
                    <table class="table" style="margin-bottom: 0;">
                        <thead>
                            <tr>
                                <th>Tamaño</th>
                                <th>Ingredientes</th>
                                <th>Num. Pizzas</th>
                                <th>SubTotal</th>
                                <th>Quitar</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for p in pedido %}
                            <tr>
                                <td>{{ p.tamano }}</td>
                                <td>{{ p.ingredientes }}</td>
                                <td>{{ p.num_pizzas }}</td>
                                <td>${{ p.subtotal }}</td>
                                <td>
                                    <a href="{{ url_for('quitar_pizza', index=loop.index0) }}" class="btn btn-danger btn-mini">Quitar</a>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
 
                <div class="control-group">
                    <div class="controls" style="text-align: left; margin-top: 10px;">
                        {{ form.terminar(class="btn btn-success btn-large") }}
                    </div>
                </div>
            </div>
 
            <div class="span4" style="flex: 1;">
                <div class="ventas-box">
                    <fieldset>
                        <legend>Ventas del día</legend>
 
                        {% if ventas_cliente %}
                            {% for nombre, total in ventas_cliente.items() %}
                                <p style="margin: 0;"><b>{{ nombre }} total ${{ total }}</b></p>
                            {% endfor %}
                            <hr>
                            <h4>Ventas totales del día: ${{ total_dia }}</h4>
                        {% else %}
                            <p>Aún no hay ventas registradas.</p>
                        {% endif %}
                    </fieldset>
                </div>
 
                <div class="ventas-button-container">
                    {{ form.mostrar_ventas(class="btn btn-default") }}
                </div>
            </div>
 
        </div>
    </form>
</div>
 
{% endblock %}